<div class="grid two-cols">
  <section class="card">
    <h1>مرور کلی</h1>
    <p class="text-muted">گزارش سریع از ساعات ثبت شده برای ماه جاری.</p>
    <div class="stats">
      <div>
        <span class="label">مجموع ساعات</span>
        <span class="value">{{ total() }}</span>
      </div>
      <div>
        <span class="label">کسری</span>
        <span class="value">{{ deficit() }}</span>
      </div>
    </div>
  </section>
  <section class="card">
    <h2>انتخاب بازه و کاربر</h2>
    <app-selection-panel
      [teams]="teams()"
      (selectionChange)="handleSelection($event)"
      [busy]="busy()"
    />
  </section>
</div>

<section class="card" *ngIf="result() as res">
  <h2>جزئیات روزانه</h2>
  <div class="table-wrap" *ngIf="res.days?.length; else empty">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">تاریخ</th>
          <th scope="col">ساعت</th>
          <th scope="col">وضعیت</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let day of res.days">
          <td>{{ day.date }}</td>
          <td>{{ day.totalHours }}</td>
          <td><span class="badge">{{ day.classification }}</span></td>
        </tr>
      </tbody>
    </table>
  </div>
  <ng-template #empty>
    <p class="text-muted">برای نمایش گزارش ابتدا کاربر و بازه زمانی را انتخاب کنید.</p>
  </ng-template>
</section>

<p class="error" *ngIf="error() as err">{{ err }}</p>
